{"ast":null,"code":"import { createUserWithEmailAndPassword } from 'firebase/auth';\nimport { doc, setDoc } from 'firebase/firestore';\nimport { auth, db } from '../config/firebase';\nimport { lireGoogleSheets } from '../services/googleSheetsService';\nexport const migrateUsersToFirebase = async () => {\n  console.log('üöÄ D√©but migration utilisateurs...');\n  try {\n    // Lire les joueurs depuis Google Sheets\n    const joueurs = await lireGoogleSheets('Joueurs');\n    console.log(`üìä ${joueurs.length} utilisateurs √† migrer`);\n    let success = 0;\n    let errors = 0;\n    for (const joueur of joueurs) {\n      try {\n        const email = `${joueur.username.toLowerCase()}@esccappelle.com`;\n\n        // Cr√©er compte Firebase Auth\n        const userCredential = await createUserWithEmailAndPassword(auth, email, joueur.password);\n\n        // Cr√©er document Firestore\n        await setDoc(doc(db, 'users', userCredential.user.uid), {\n          id: joueur.id,\n          nom: joueur.nom,\n          username: joueur.username,\n          role: joueur.role,\n          email: email,\n          createdAt: new Date()\n        });\n        console.log(`‚úÖ ${joueur.nom} migr√©`);\n        success++;\n      } catch (error) {\n        if (error.code === 'auth/email-already-in-use') {\n          console.log(`‚ö†Ô∏è ${joueur.nom} existe d√©j√†`);\n        } else {\n          console.error(`‚ùå Erreur ${joueur.nom}:`, error.message);\n        }\n        errors++;\n      }\n    }\n    console.log(`\\n‚úÖ Migration termin√©e !`);\n    console.log(`‚úÖ Succ√®s: ${success}`);\n    console.log(`‚ùå Erreurs: ${errors}`);\n    return {\n      success,\n      errors\n    };\n  } catch (error) {\n    console.error('‚ùå Erreur migration:', error);\n    throw error;\n  }\n};","map":{"version":3,"names":["createUserWithEmailAndPassword","doc","setDoc","auth","db","lireGoogleSheets","migrateUsersToFirebase","console","log","joueurs","length","success","errors","joueur","email","username","toLowerCase","userCredential","password","user","uid","id","nom","role","createdAt","Date","error","code","message"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/scripts/migrateUsers.js"],"sourcesContent":["import { createUserWithEmailAndPassword } from 'firebase/auth';\nimport { doc, setDoc } from 'firebase/firestore';\nimport { auth, db } from '../config/firebase';\nimport { lireGoogleSheets } from '../services/googleSheetsService';\n\nexport const migrateUsersToFirebase = async () => {\n  console.log('üöÄ D√©but migration utilisateurs...');\n  \n  try {\n    // Lire les joueurs depuis Google Sheets\n    const joueurs = await lireGoogleSheets('Joueurs');\n    console.log(`üìä ${joueurs.length} utilisateurs √† migrer`);\n    \n    let success = 0;\n    let errors = 0;\n    \n    for (const joueur of joueurs) {\n      try {\n        const email = `${joueur.username.toLowerCase()}@esccappelle.com`;\n        \n        // Cr√©er compte Firebase Auth\n        const userCredential = await createUserWithEmailAndPassword(\n          auth, \n          email, \n          joueur.password\n        );\n        \n        // Cr√©er document Firestore\n        await setDoc(doc(db, 'users', userCredential.user.uid), {\n          id: joueur.id,\n          nom: joueur.nom,\n          username: joueur.username,\n          role: joueur.role,\n          email: email,\n          createdAt: new Date()\n        });\n        \n        console.log(`‚úÖ ${joueur.nom} migr√©`);\n        success++;\n        \n      } catch (error) {\n        if (error.code === 'auth/email-already-in-use') {\n          console.log(`‚ö†Ô∏è ${joueur.nom} existe d√©j√†`);\n        } else {\n          console.error(`‚ùå Erreur ${joueur.nom}:`, error.message);\n        }\n        errors++;\n      }\n    }\n    \n    console.log(`\\n‚úÖ Migration termin√©e !`);\n    console.log(`‚úÖ Succ√®s: ${success}`);\n    console.log(`‚ùå Erreurs: ${errors}`);\n    \n    return { success, errors };\n    \n  } catch (error) {\n    console.error('‚ùå Erreur migration:', error);\n    throw error;\n  }\n};"],"mappings":"AAAA,SAASA,8BAA8B,QAAQ,eAAe;AAC9D,SAASC,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAChD,SAASC,IAAI,EAAEC,EAAE,QAAQ,oBAAoB;AAC7C,SAASC,gBAAgB,QAAQ,iCAAiC;AAElE,OAAO,MAAMC,sBAAsB,GAAG,MAAAA,CAAA,KAAY;EAChDC,OAAO,CAACC,GAAG,CAAC,oCAAoC,CAAC;EAEjD,IAAI;IACF;IACA,MAAMC,OAAO,GAAG,MAAMJ,gBAAgB,CAAC,SAAS,CAAC;IACjDE,OAAO,CAACC,GAAG,CAAC,MAAMC,OAAO,CAACC,MAAM,wBAAwB,CAAC;IAEzD,IAAIC,OAAO,GAAG,CAAC;IACf,IAAIC,MAAM,GAAG,CAAC;IAEd,KAAK,MAAMC,MAAM,IAAIJ,OAAO,EAAE;MAC5B,IAAI;QACF,MAAMK,KAAK,GAAG,GAAGD,MAAM,CAACE,QAAQ,CAACC,WAAW,CAAC,CAAC,kBAAkB;;QAEhE;QACA,MAAMC,cAAc,GAAG,MAAMjB,8BAA8B,CACzDG,IAAI,EACJW,KAAK,EACLD,MAAM,CAACK,QACT,CAAC;;QAED;QACA,MAAMhB,MAAM,CAACD,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEa,cAAc,CAACE,IAAI,CAACC,GAAG,CAAC,EAAE;UACtDC,EAAE,EAAER,MAAM,CAACQ,EAAE;UACbC,GAAG,EAAET,MAAM,CAACS,GAAG;UACfP,QAAQ,EAAEF,MAAM,CAACE,QAAQ;UACzBQ,IAAI,EAAEV,MAAM,CAACU,IAAI;UACjBT,KAAK,EAAEA,KAAK;UACZU,SAAS,EAAE,IAAIC,IAAI,CAAC;QACtB,CAAC,CAAC;QAEFlB,OAAO,CAACC,GAAG,CAAC,KAAKK,MAAM,CAACS,GAAG,QAAQ,CAAC;QACpCX,OAAO,EAAE;MAEX,CAAC,CAAC,OAAOe,KAAK,EAAE;QACd,IAAIA,KAAK,CAACC,IAAI,KAAK,2BAA2B,EAAE;UAC9CpB,OAAO,CAACC,GAAG,CAAC,MAAMK,MAAM,CAACS,GAAG,cAAc,CAAC;QAC7C,CAAC,MAAM;UACLf,OAAO,CAACmB,KAAK,CAAC,YAAYb,MAAM,CAACS,GAAG,GAAG,EAAEI,KAAK,CAACE,OAAO,CAAC;QACzD;QACAhB,MAAM,EAAE;MACV;IACF;IAEAL,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC;IACvCD,OAAO,CAACC,GAAG,CAAC,aAAaG,OAAO,EAAE,CAAC;IACnCJ,OAAO,CAACC,GAAG,CAAC,cAAcI,MAAM,EAAE,CAAC;IAEnC,OAAO;MAAED,OAAO;MAAEC;IAAO,CAAC;EAE5B,CAAC,CAAC,OAAOc,KAAK,EAAE;IACdnB,OAAO,CAACmB,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;IAC3C,MAAMA,KAAK;EACb;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}