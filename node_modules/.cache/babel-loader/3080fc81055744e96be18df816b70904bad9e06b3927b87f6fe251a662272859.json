{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nexport const useFirestore = user => {\n  _s();\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const loadConvocations = async () => {\n    const convocsSnap = await getDocs(collection(db, 'convocations'));\n    setConvocations(convocsSnap.docs.map(d => ({\n      id_match: parseInt(d.data().matchId),\n      id_joueur: parseInt(d.data().userId),\n      convoque: d.data().convoque,\n      statut: d.data().statut\n    })));\n  };\n  useEffect(() => {\n    if (!user) return;\n    const loadData = async () => {\n      try {\n        // Charger utilisateurs\n        const usersSnap = await getDocs(collection(db, 'users'));\n        setJoueurs(usersSnap.docs.map(d => ({\n          id: parseInt(d.data().id || d.id),\n          nom: d.data().nom,\n          username: d.data().username,\n          role: d.data().role\n        })));\n\n        // Charger matchs\n        const matchsSnap = await getDocs(collection(db, 'matchs'));\n        const matchsData = matchsSnap.docs.map(d => {\n          const data = d.data();\n          return {\n            id: data.id ? parseInt(data.id) : parseInt(d.id),\n            date: data.date || '',\n            adversaire: data.adversaire || '',\n            lieu: data.lieu || '',\n            statut: data.statut || 'avenir',\n            score_equipe: data.score_equipe || null,\n            score_adversaire: data.score_adversaire || null\n          };\n        });\n        matchsData.sort((a, b) => new Date(a.date) - new Date(b.date));\n        setMatchs(matchsData);\n\n        // Charger convocations\n        await loadConvocations();\n\n        // Charger notes\n        const notesSnap = await getDocs(collection(db, 'notes'));\n        setNotes(notesSnap.docs.map(d => ({\n          id_match: parseInt(d.data().matchId),\n          id_joueur: parseInt(d.data().userId),\n          note: d.data().note\n        })));\n\n        // Charger stats\n        const statsSnap = await getDocs(collection(db, 'stats'));\n        const buteursArr = [];\n        const tempsArr = [];\n        const passesArr = [];\n        statsSnap.docs.forEach(d => {\n          const data = d.data();\n          const matchId = parseInt(data.matchId);\n          const userId = parseInt(data.userId);\n          if (data.buts > 0) {\n            buteursArr.push({\n              id_match: matchId,\n              id_joueur: userId,\n              buts: data.buts\n            });\n          }\n          if (data.tempsDeJeu > 0) {\n            tempsArr.push({\n              id_match: matchId,\n              id_joueur: userId,\n              temps: data.tempsDeJeu\n            });\n          }\n          if (data.passesDecisives > 0) {\n            passesArr.push({\n              id_match: matchId,\n              id_joueur: userId,\n              passes: data.passesDecisives\n            });\n          }\n        });\n        setButeurs(buteursArr);\n        setTempsDeJeu(tempsArr);\n        setPassesD(passesArr);\n\n        // Charger évaluations\n        const evalsSnap = await getDocs(collection(db, 'evaluations'));\n        setEvaluationsCoach(evalsSnap.docs.map(d => ({\n          id_joueur: parseInt(d.data().userId),\n          evaluateur: d.data().evaluateur,\n          technicite: d.data().technicite || 0,\n          vision: d.data().vision || 0,\n          collectif: d.data().collectif || 0,\n          mental: d.data().mental || 0\n        })));\n        setLoading(false);\n      } catch (error) {\n        console.error('Erreur chargement Firestore:', error);\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [user]);\n  return {\n    joueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    loadConvocations\n  };\n};\n_s(useFirestore, \"O/7k3GtUSQorFpE5eLUWtZievPo=\");","map":{"version":3,"names":["useState","useEffect","collection","getDocs","db","useFirestore","user","_s","joueurs","setJoueurs","matchs","setMatchs","convocations","setConvocations","notes","setNotes","buteurs","setButeurs","tempsDeJeu","setTempsDeJeu","passesD","setPassesD","evaluationsCoach","setEvaluationsCoach","loading","setLoading","loadConvocations","convocsSnap","docs","map","d","id_match","parseInt","data","matchId","id_joueur","userId","convoque","statut","loadData","usersSnap","id","nom","username","role","matchsSnap","matchsData","date","adversaire","lieu","score_equipe","score_adversaire","sort","a","b","Date","notesSnap","note","statsSnap","buteursArr","tempsArr","passesArr","forEach","buts","push","temps","passesDecisives","passes","evalsSnap","evaluateur","technicite","vision","collectif","mental","error","console"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useFirestore.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nexport const useFirestore = (user) => {\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadConvocations = async () => {\n    const convocsSnap = await getDocs(collection(db, 'convocations'));\n    setConvocations(convocsSnap.docs.map(d => ({\n      id_match: parseInt(d.data().matchId),\n      id_joueur: parseInt(d.data().userId),\n      convoque: d.data().convoque,\n      statut: d.data().statut\n    })));\n  };\n\n  useEffect(() => {\n    if (!user) return;\n    \n    const loadData = async () => {\n      try {\n        // Charger utilisateurs\n        const usersSnap = await getDocs(collection(db, 'users'));\n        setJoueurs(usersSnap.docs.map(d => ({ \n          id: parseInt(d.data().id || d.id),\n          nom: d.data().nom,\n          username: d.data().username,\n          role: d.data().role\n        })));\n        \n        // Charger matchs\n        const matchsSnap = await getDocs(collection(db, 'matchs'));\n        const matchsData = matchsSnap.docs.map(d => {\n          const data = d.data();\n          return {\n            id: data.id ? parseInt(data.id) : parseInt(d.id),\n            date: data.date || '',\n            adversaire: data.adversaire || '',\n            lieu: data.lieu || '',\n            statut: data.statut || 'avenir',\n            score_equipe: data.score_equipe || null,\n            score_adversaire: data.score_adversaire || null\n          };\n        });\n        matchsData.sort((a, b) => new Date(a.date) - new Date(b.date));\n        setMatchs(matchsData);\n        \n        // Charger convocations\n        await loadConvocations();\n        \n        // Charger notes\n        const notesSnap = await getDocs(collection(db, 'notes'));\n        setNotes(notesSnap.docs.map(d => ({\n          id_match: parseInt(d.data().matchId),\n          id_joueur: parseInt(d.data().userId),\n          note: d.data().note\n        })));\n        \n        // Charger stats\n        const statsSnap = await getDocs(collection(db, 'stats'));\n        const buteursArr = [];\n        const tempsArr = [];\n        const passesArr = [];\n        \n        statsSnap.docs.forEach(d => {\n          const data = d.data();\n          const matchId = parseInt(data.matchId);\n          const userId = parseInt(data.userId);\n          \n          if (data.buts > 0) {\n            buteursArr.push({ id_match: matchId, id_joueur: userId, buts: data.buts });\n          }\n          if (data.tempsDeJeu > 0) {\n            tempsArr.push({ id_match: matchId, id_joueur: userId, temps: data.tempsDeJeu });\n          }\n          if (data.passesDecisives > 0) {\n            passesArr.push({ id_match: matchId, id_joueur: userId, passes: data.passesDecisives });\n          }\n        });\n        \n        setButeurs(buteursArr);\n        setTempsDeJeu(tempsArr);\n        setPassesD(passesArr);\n        \n        // Charger évaluations\n        const evalsSnap = await getDocs(collection(db, 'evaluations'));\n        setEvaluationsCoach(evalsSnap.docs.map(d => ({\n          id_joueur: parseInt(d.data().userId),\n          evaluateur: d.data().evaluateur,\n          technicite: d.data().technicite || 0,\n          vision: d.data().vision || 0,\n          collectif: d.data().collectif || 0,\n          mental: d.data().mental || 0\n        })));\n        \n        setLoading(false);\n      } catch (error) {\n        console.error('Erreur chargement Firestore:', error);\n        setLoading(false);\n      }\n    };\n    \n    loadData();\n  }, [user]);\n\n  return {\n    joueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    loadConvocations\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}