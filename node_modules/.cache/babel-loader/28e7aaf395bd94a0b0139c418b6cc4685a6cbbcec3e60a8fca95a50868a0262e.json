{"ast":null,"code":"var _s2 = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { lireGoogleSheets, ecrireGoogleSheets } from '../services/googleSheetsService';\nimport { demoJoueurs, demoMatchs } from '../constants/demoData';\nconst useGoogleSheets = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [actionJoueurEnCours, setActionJoueurEnCours] = useState(false);\n  const isInitialLoad = useRef(true);\n  const chargerDonnees = async () => {\n    setLoading(true);\n    const [joueursData, matchsData, convocsData, notesData, buteursData, tempsData, passesData, evaluationsData] = await Promise.all([lireGoogleSheets('Joueurs'), lireGoogleSheets('Matchs'), lireGoogleSheets('Convocations'), lireGoogleSheets('Notes'), lireGoogleSheets('Buteurs'), lireGoogleSheets('TempsDeJeu'), lireGoogleSheets('PassesD'), lireGoogleSheets('EvaluationsCoach')]);\n    setJoueurs(joueursData.length > 0 ? joueursData : demoJoueurs);\n    setMatchs(matchsData.length > 0 ? matchsData : demoMatchs);\n    setConvocations(convocsData);\n    setNotes(notesData);\n    setButeurs(buteursData);\n    setTempsDeJeu(tempsData);\n    setPassesD(passesData);\n    setEvaluationsCoach(evaluationsData);\n    setLoading(false);\n    isInitialLoad.current = false;\n  };\n\n  // Auto-save effects\n  const setupAutoSave = user => {\n    _s();\n    useEffect(() => {\n      if (!isInitialLoad.current && user && convocations.length > 0) {\n        if (user.role === 'coach' || user.role === 'coach_adjoint') {\n          ecrireGoogleSheets('Convocations', convocations);\n        } else if (user.role === 'joueur' && actionJoueurEnCours) {\n          ecrireGoogleSheets('Convocations', convocations);\n          setActionJoueurEnCours(false);\n        }\n      }\n    }, [convocations, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && notes.length > 0) {\n        ecrireGoogleSheets('Notes', notes);\n      }\n    }, [notes, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && buteurs.length > 0) {\n        ecrireGoogleSheets('Buteurs', buteurs);\n      }\n    }, [buteurs, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && tempsDeJeu.length > 0) {\n        ecrireGoogleSheets('TempsDeJeu', tempsDeJeu);\n      }\n    }, [tempsDeJeu, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && passesD.length > 0) {\n        ecrireGoogleSheets('PassesD', passesD);\n      }\n    }, [passesD, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && matchs.length > 0) {\n        ecrireGoogleSheets('Matchs', matchs);\n      }\n    }, [matchs, user]);\n    useEffect(() => {\n      if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'joueur' && evaluationsCoach.length > 0) {\n        ecrireGoogleSheets('EvaluationsCoach', evaluationsCoach);\n      }\n    }, [evaluationsCoach, user]);\n  };\n  _s(setupAutoSave, \"1w1+ubchRmD/J3f9qMRUlZi0AA0=\");\n  return {\n    joueurs,\n    setJoueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    chargerDonnees,\n    setupAutoSave,\n    actionJoueurEnCours,\n    setActionJoueurEnCours\n  };\n};\n_s2(useGoogleSheets, \"MlA0AIORGXunE5s2thr5v5HlwGs=\");\nexport default useGoogleSheets;","map":{"version":3,"names":["useState","useEffect","useRef","lireGoogleSheets","ecrireGoogleSheets","demoJoueurs","demoMatchs","useGoogleSheets","_s2","_s","$RefreshSig$","joueurs","setJoueurs","matchs","setMatchs","convocations","setConvocations","notes","setNotes","buteurs","setButeurs","tempsDeJeu","setTempsDeJeu","passesD","setPassesD","evaluationsCoach","setEvaluationsCoach","loading","setLoading","actionJoueurEnCours","setActionJoueurEnCours","isInitialLoad","chargerDonnees","joueursData","matchsData","convocsData","notesData","buteursData","tempsData","passesData","evaluationsData","Promise","all","length","current","setupAutoSave","user","role"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useGoogleSheets.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { lireGoogleSheets, ecrireGoogleSheets } from '../services/googleSheetsService';\nimport { demoJoueurs, demoMatchs } from '../constants/demoData';\n\nconst useGoogleSheets = () => {\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [actionJoueurEnCours, setActionJoueurEnCours] = useState(false);\n\n  const isInitialLoad = useRef(true);\n\n  const chargerDonnees = async () => {\n    setLoading(true);\n    const [joueursData, matchsData, convocsData, notesData, buteursData, tempsData, passesData, evaluationsData] = await Promise.all([\n      lireGoogleSheets('Joueurs'),\n      lireGoogleSheets('Matchs'),\n      lireGoogleSheets('Convocations'),\n      lireGoogleSheets('Notes'),\n      lireGoogleSheets('Buteurs'),\n      lireGoogleSheets('TempsDeJeu'),\n      lireGoogleSheets('PassesD'),\n      lireGoogleSheets('EvaluationsCoach')\n    ]);\n\n    setJoueurs(joueursData.length > 0 ? joueursData : demoJoueurs);\n    setMatchs(matchsData.length > 0 ? matchsData : demoMatchs);\n    setConvocations(convocsData);\n    setNotes(notesData);\n    setButeurs(buteursData);\n    setTempsDeJeu(tempsData);\n    setPassesD(passesData);\n    setEvaluationsCoach(evaluationsData);\n\n    setLoading(false);\n    isInitialLoad.current = false;\n  };\n\n  // Auto-save effects\n  const setupAutoSave = (user) => {\n    useEffect(() => {\n      if (!isInitialLoad.current && user && convocations.length > 0) {\n        if (user.role === 'coach' || user.role === 'coach_adjoint') {\n          ecrireGoogleSheets('Convocations', convocations);\n        } else if (user.role === 'joueur' && actionJoueurEnCours) {\n          ecrireGoogleSheets('Convocations', convocations);\n          setActionJoueurEnCours(false);\n        }\n      }\n    }, [convocations, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && user?.role === 'coach' && notes.length > 0) {\n        ecrireGoogleSheets('Notes', notes);\n      }\n    }, [notes, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && buteurs.length > 0) {\n        ecrireGoogleSheets('Buteurs', buteurs);\n      }\n    }, [buteurs, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && tempsDeJeu.length > 0) {\n        ecrireGoogleSheets('TempsDeJeu', tempsDeJeu);\n      }\n    }, [tempsDeJeu, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && passesD.length > 0) {\n        ecrireGoogleSheets('PassesD', passesD);\n      }\n    }, [passesD, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && user?.role === 'coach' && matchs.length > 0) {\n        ecrireGoogleSheets('Matchs', matchs);\n      }\n    }, [matchs, user]);\n\n    useEffect(() => {\n      if (!isInitialLoad.current && user?.role === 'joueur' && evaluationsCoach.length > 0) {\n        ecrireGoogleSheets('EvaluationsCoach', evaluationsCoach);\n      }\n    }, [evaluationsCoach, user]);\n  };\n\n  return {\n    joueurs,\n    setJoueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    chargerDonnees,\n    setupAutoSave,\n    actionJoueurEnCours,\n    setActionJoueurEnCours\n  };\n};\n\nexport default useGoogleSheets;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}