{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { doc, updateDoc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nconst useMatchManagement = () => {\n  _s();\n  const [selectedMatch, setSelectedMatch] = useState(null);\n  const [showScoreModal, setShowScoreModal] = useState(false);\n  const [matchToPlay, setMatchToPlay] = useState(null);\n  const [scoreEquipeInput, setScoreEquipeInput] = useState('');\n  const [scoreAdversaireInput, setScoreAdversaireInput] = useState('');\n  const marquerCommeJoue = async (matchId, matchs) => {\n    const match = matchs.find(m => m.id === matchId);\n    if (!match) return;\n    setMatchToPlay(match);\n    setShowScoreModal(true);\n  };\n  const confirmerScoreEtJouer = async (matchs, setMatchs, showNotification) => {\n    if (!matchToPlay) return;\n    const scoreEquipe = parseInt(scoreEquipeInput) || 0;\n    const scoreAdversaire = parseInt(scoreAdversaireInput) || 0;\n    try {\n      // Mettre à jour dans Firestore\n      const matchRef = doc(db, 'matchs', String(matchToPlay.id));\n      await updateDoc(matchRef, {\n        statut: 'joue',\n        score_equipe: scoreEquipe,\n        score_adversaire: scoreAdversaire,\n        updatedAt: new Date()\n      });\n\n      // Mettre à jour local\n      const updatedMatchs = matchs.map(m => m.id === matchToPlay.id ? {\n        ...m,\n        statut: 'joue',\n        score_equipe: scoreEquipe,\n        score_adversaire: scoreAdversaire\n      } : m);\n      setMatchs(updatedMatchs);\n      showNotification('✅ Match marqué comme joué', 'success');\n      setShowScoreModal(false);\n      setMatchToPlay(null);\n      setScoreEquipeInput('');\n      setScoreAdversaireInput('');\n    } catch (error) {\n      showNotification('❌ Erreur lors de la mise à jour du match', 'error');\n    }\n  };\n  const repasserEnAttente = async (matchId, matchs, setMatchs, notes) => {\n    if (!window.confirm('Repasser ce match en attente ? Les notes seront supprimées.')) {\n      return;\n    }\n    try {\n      // Mettre à jour dans Firestore\n      const matchRef = doc(db, 'matchs', String(matchId));\n      await updateDoc(matchRef, {\n        statut: 'avenir',\n        score_equipe: null,\n        score_adversaire: null,\n        updatedAt: new Date()\n      });\n\n      // Supprimer les notes associées dans Firestore\n      const notesToDelete = notes.filter(n => n.id_match === matchId);\n      for (const note of notesToDelete) {\n        const noteRef = doc(db, 'notes', `${matchId}_${note.id_joueur}`);\n        await deleteDoc(noteRef);\n      }\n\n      // Mettre à jour local\n      const updatedMatchs = matchs.map(m => m.id === matchId ? {\n        ...m,\n        statut: 'avenir',\n        score_equipe: null,\n        score_adversaire: null\n      } : m);\n      setMatchs(updatedMatchs);\n    } catch (error) {\n      console.error('Erreur repasserEnAttente:', error);\n    }\n  };\n  return {\n    selectedMatch,\n    setSelectedMatch,\n    showScoreModal,\n    setShowScoreModal,\n    matchToPlay,\n    scoreEquipeInput,\n    setScoreEquipeInput,\n    scoreAdversaireInput,\n    setScoreAdversaireInput,\n    marquerCommeJoue,\n    confirmerScoreEtJouer,\n    repasserEnAttente\n  };\n};\n_s(useMatchManagement, \"Q533ElhaT7BJBKjOew8PKupqGJQ=\");\nexport default useMatchManagement;","map":{"version":3,"names":["useState","doc","updateDoc","deleteDoc","db","useMatchManagement","_s","selectedMatch","setSelectedMatch","showScoreModal","setShowScoreModal","matchToPlay","setMatchToPlay","scoreEquipeInput","setScoreEquipeInput","scoreAdversaireInput","setScoreAdversaireInput","marquerCommeJoue","matchId","matchs","match","find","m","id","confirmerScoreEtJouer","setMatchs","showNotification","scoreEquipe","parseInt","scoreAdversaire","matchRef","String","statut","score_equipe","score_adversaire","updatedAt","Date","updatedMatchs","map","error","repasserEnAttente","notes","window","confirm","notesToDelete","filter","n","id_match","note","noteRef","id_joueur","console"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useMatchManagement.js"],"sourcesContent":["import { useState } from 'react';\nimport { doc, updateDoc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nconst useMatchManagement = () => {\n  const [selectedMatch, setSelectedMatch] = useState(null);\n  const [showScoreModal, setShowScoreModal] = useState(false);\n  const [matchToPlay, setMatchToPlay] = useState(null);\n  const [scoreEquipeInput, setScoreEquipeInput] = useState('');\n  const [scoreAdversaireInput, setScoreAdversaireInput] = useState('');\n\n  const marquerCommeJoue = async (matchId, matchs) => {\n    const match = matchs.find(m => m.id === matchId);\n    if (!match) return;\n\n    setMatchToPlay(match);\n    setShowScoreModal(true);\n  };\n\n  const confirmerScoreEtJouer = async (matchs, setMatchs, showNotification) => {\n    if (!matchToPlay) return;\n\n    const scoreEquipe = parseInt(scoreEquipeInput) || 0;\n    const scoreAdversaire = parseInt(scoreAdversaireInput) || 0;\n\n    try {\n      // Mettre à jour dans Firestore\n      const matchRef = doc(db, 'matchs', String(matchToPlay.id));\n      await updateDoc(matchRef, {\n        statut: 'joue',\n        score_equipe: scoreEquipe,\n        score_adversaire: scoreAdversaire,\n        updatedAt: new Date()\n      });\n\n      // Mettre à jour local\n      const updatedMatchs = matchs.map(m =>\n        m.id === matchToPlay.id\n          ? { ...m, statut: 'joue', score_equipe: scoreEquipe, score_adversaire: scoreAdversaire }\n          : m\n      );\n      setMatchs(updatedMatchs);\n\n      showNotification('✅ Match marqué comme joué', 'success');\n      setShowScoreModal(false);\n      setMatchToPlay(null);\n      setScoreEquipeInput('');\n      setScoreAdversaireInput('');\n    } catch (error) {\n      showNotification('❌ Erreur lors de la mise à jour du match', 'error');\n    }\n  };\n\n  const repasserEnAttente = async (matchId, matchs, setMatchs, notes) => {\n    if (!window.confirm('Repasser ce match en attente ? Les notes seront supprimées.')) {\n      return;\n    }\n\n    try {\n      // Mettre à jour dans Firestore\n      const matchRef = doc(db, 'matchs', String(matchId));\n      await updateDoc(matchRef, {\n        statut: 'avenir',\n        score_equipe: null,\n        score_adversaire: null,\n        updatedAt: new Date()\n      });\n\n      // Supprimer les notes associées dans Firestore\n      const notesToDelete = notes.filter(n => n.id_match === matchId);\n      for (const note of notesToDelete) {\n        const noteRef = doc(db, 'notes', `${matchId}_${note.id_joueur}`);\n        await deleteDoc(noteRef);\n      }\n\n      // Mettre à jour local\n      const updatedMatchs = matchs.map(m =>\n        m.id === matchId\n          ? { ...m, statut: 'avenir', score_equipe: null, score_adversaire: null }\n          : m\n      );\n      setMatchs(updatedMatchs);\n\n    } catch (error) {\n      console.error('Erreur repasserEnAttente:', error);\n    }\n  };\n\n  return {\n    selectedMatch,\n    setSelectedMatch,\n    showScoreModal,\n    setShowScoreModal,\n    matchToPlay,\n    scoreEquipeInput,\n    setScoreEquipeInput,\n    scoreAdversaireInput,\n    setScoreAdversaireInput,\n    marquerCommeJoue,\n    confirmerScoreEtJouer,\n    repasserEnAttente\n  };\n};\n\nexport default useMatchManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}