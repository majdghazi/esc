{"ast":null,"code":"import { doc, setDoc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nconst useNotesJoueurs = () => {\n  const saveNote = async (joueurId, selectedMatch, noteInputs, setNoteInputs, notes, setNotes, setEditingNote, showNotification) => {\n    const noteValue = noteInputs[joueurId];\n    if (!noteValue || noteValue < 1 || noteValue > 9) {\n      alert('Note invalide (1-9)');\n      return;\n    }\n\n    // Écrire dans Firestore\n    const noteId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'notes', noteId), {\n      id: noteId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      note: parseFloat(noteValue),\n      createdAt: new Date()\n    });\n\n    // Mettre à jour local\n    const newNotes = notes.filter(n => !(n.id_match === selectedMatch && n.id_joueur === joueurId));\n    newNotes.push({\n      id_match: selectedMatch,\n      id_joueur: joueurId,\n      note: parseFloat(noteValue)\n    });\n    setNotes(newNotes);\n    setEditingNote(null);\n    setNoteInputs({\n      ...noteInputs,\n      [joueurId]: ''\n    });\n  };\n  const saveButs = async (joueurId, selectedMatch, butInputs, setButInputs, buteurs, setButeurs, showNotification) => {\n    const butsValue = butInputs[joueurId] || 0;\n\n    // Écrire dans Firestore (via stats)\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    const statDoc = doc(db, 'stats', statId);\n\n    // On doit récupérer les stats existantes pour ne pas écraser\n    const existingBut = buteurs.find(b => b.id_match === selectedMatch && b.id_joueur === joueurId);\n    const existingTemps = 0; // TODO: récupérer\n    const existingPasses = 0; // TODO: récupérer\n\n    await setDoc(statDoc, {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      buts: parseInt(butsValue) || 0,\n      tempsDeJeu: existingTemps,\n      passesDecisives: existingPasses,\n      createdAt: new Date()\n    }, {\n      merge: true\n    });\n\n    // Mettre à jour local\n    const newButeurs = buteurs.filter(b => !(b.id_match === selectedMatch && b.id_joueur === joueurId));\n    if (butsValue > 0) {\n      newButeurs.push({\n        id_match: selectedMatch,\n        id_joueur: joueurId,\n        buts: parseInt(butsValue)\n      });\n    }\n    setButeurs(newButeurs);\n    setButInputs({\n      ...butInputs,\n      [joueurId]: ''\n    });\n  };\n  const saveTemps = async (joueurId, selectedMatch, tempsInputs, setTempsInputs, tempsDeJeu, setTempsDeJeu, showNotification) => {\n    const tempsValue = tempsInputs[joueurId] || 0;\n\n    // Écrire dans Firestore\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'stats', statId), {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      tempsDeJeu: parseInt(tempsValue) || 0,\n      createdAt: new Date()\n    }, {\n      merge: true\n    });\n\n    // Mettre à jour local\n    const newTemps = tempsDeJeu.filter(t => !(t.id_match === selectedMatch && t.id_joueur === joueurId));\n    if (tempsValue > 0) {\n      newTemps.push({\n        id_match: selectedMatch,\n        id_joueur: joueurId,\n        temps: parseInt(tempsValue)\n      });\n    }\n    setTempsDeJeu(newTemps);\n    setTempsInputs({\n      ...tempsInputs,\n      [joueurId]: ''\n    });\n  };\n  const savePasses = async (joueurId, selectedMatch, passesInputs, setPassesInputs, passesD, setPassesD, showNotification) => {\n    const passesValue = passesInputs[joueurId] || 0;\n\n    // Écrire dans Firestore\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'stats', statId), {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      passesDecisives: parseInt(passesValue) || 0,\n      createdAt: new Date()\n    }, {\n      merge: true\n    });\n\n    // Mettre à jour local\n    const newPasses = passesD.filter(p => !(p.id_match === selectedMatch && p.id_joueur === joueurId));\n    if (passesValue > 0) {\n      newPasses.push({\n        id_match: selectedMatch,\n        id_joueur: joueurId,\n        passes: parseInt(passesValue)\n      });\n    }\n    setPassesD(newPasses);\n    setPassesInputs({\n      ...passesInputs,\n      [joueurId]: ''\n    });\n  };\n  return {\n    saveNote,\n    saveButs,\n    saveTemps,\n    savePasses\n  };\n};\nexport default useNotesJoueurs;","map":{"version":3,"names":["doc","setDoc","deleteDoc","db","useNotesJoueurs","saveNote","joueurId","selectedMatch","noteInputs","setNoteInputs","notes","setNotes","setEditingNote","showNotification","noteValue","alert","noteId","String","id","matchId","userId","note","parseFloat","createdAt","Date","newNotes","filter","n","id_match","id_joueur","push","saveButs","butInputs","setButInputs","buteurs","setButeurs","butsValue","statId","statDoc","existingBut","find","b","existingTemps","existingPasses","buts","parseInt","tempsDeJeu","passesDecisives","merge","newButeurs","saveTemps","tempsInputs","setTempsInputs","setTempsDeJeu","tempsValue","newTemps","t","temps","savePasses","passesInputs","setPassesInputs","passesD","setPassesD","passesValue","newPasses","p","passes"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useNotesJoueurs.js"],"sourcesContent":["import { doc, setDoc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nconst useNotesJoueurs = () => {\n  const saveNote = async (joueurId, selectedMatch, noteInputs, setNoteInputs, notes, setNotes, setEditingNote, showNotification) => {\n    const noteValue = noteInputs[joueurId];\n    if (!noteValue || noteValue < 1 || noteValue > 9) {\n      alert('Note invalide (1-9)');\n      return;\n    }\n\n    // Écrire dans Firestore\n    const noteId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'notes', noteId), {\n      id: noteId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      note: parseFloat(noteValue),\n      createdAt: new Date()\n    });\n\n    // Mettre à jour local\n    const newNotes = notes.filter(n => !(n.id_match === selectedMatch && n.id_joueur === joueurId));\n    newNotes.push({ id_match: selectedMatch, id_joueur: joueurId, note: parseFloat(noteValue) });\n    setNotes(newNotes);\n    setEditingNote(null);\n    setNoteInputs({ ...noteInputs, [joueurId]: '' });\n  };\n\n  const saveButs = async (joueurId, selectedMatch, butInputs, setButInputs, buteurs, setButeurs, showNotification) => {\n    const butsValue = butInputs[joueurId] || 0;\n\n    // Écrire dans Firestore (via stats)\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    const statDoc = doc(db, 'stats', statId);\n    \n    // On doit récupérer les stats existantes pour ne pas écraser\n    const existingBut = buteurs.find(b => b.id_match === selectedMatch && b.id_joueur === joueurId);\n    const existingTemps = 0; // TODO: récupérer\n    const existingPasses = 0; // TODO: récupérer\n    \n    await setDoc(statDoc, {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      buts: parseInt(butsValue) || 0,\n      tempsDeJeu: existingTemps,\n      passesDecisives: existingPasses,\n      createdAt: new Date()\n    }, { merge: true });\n\n    // Mettre à jour local\n    const newButeurs = buteurs.filter(b => !(b.id_match === selectedMatch && b.id_joueur === joueurId));\n    if (butsValue > 0) {\n      newButeurs.push({ id_match: selectedMatch, id_joueur: joueurId, buts: parseInt(butsValue) });\n    }\n    setButeurs(newButeurs);\n    setButInputs({ ...butInputs, [joueurId]: '' });\n  };\n\n  const saveTemps = async (joueurId, selectedMatch, tempsInputs, setTempsInputs, tempsDeJeu, setTempsDeJeu, showNotification) => {\n    const tempsValue = tempsInputs[joueurId] || 0;\n\n    // Écrire dans Firestore\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'stats', statId), {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      tempsDeJeu: parseInt(tempsValue) || 0,\n      createdAt: new Date()\n    }, { merge: true });\n\n    // Mettre à jour local\n    const newTemps = tempsDeJeu.filter(t => !(t.id_match === selectedMatch && t.id_joueur === joueurId));\n    if (tempsValue > 0) {\n      newTemps.push({ id_match: selectedMatch, id_joueur: joueurId, temps: parseInt(tempsValue) });\n    }\n    setTempsDeJeu(newTemps);\n    setTempsInputs({ ...tempsInputs, [joueurId]: '' });\n  };\n\n  const savePasses = async (joueurId, selectedMatch, passesInputs, setPassesInputs, passesD, setPassesD, showNotification) => {\n    const passesValue = passesInputs[joueurId] || 0;\n\n    // Écrire dans Firestore\n    const statId = `${String(selectedMatch)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'stats', statId), {\n      id: statId,\n      matchId: String(selectedMatch),\n      userId: String(joueurId),\n      passesDecisives: parseInt(passesValue) || 0,\n      createdAt: new Date()\n    }, { merge: true });\n\n    // Mettre à jour local\n    const newPasses = passesD.filter(p => !(p.id_match === selectedMatch && p.id_joueur === joueurId));\n    if (passesValue > 0) {\n      newPasses.push({ id_match: selectedMatch, id_joueur: joueurId, passes: parseInt(passesValue) });\n    }\n    setPassesD(newPasses);\n    setPassesInputs({ ...passesInputs, [joueurId]: '' });\n  };\n\n  return {\n    saveNote,\n    saveButs,\n    saveTemps,\n    savePasses\n  };\n};\n\nexport default useNotesJoueurs;"],"mappings":"AAAA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAC3D,SAASC,EAAE,QAAQ,oBAAoB;AAEvC,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAC5B,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,aAAa,EAAEC,UAAU,EAAEC,aAAa,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,gBAAgB,KAAK;IAChI,MAAMC,SAAS,GAAGN,UAAU,CAACF,QAAQ,CAAC;IACtC,IAAI,CAACQ,SAAS,IAAIA,SAAS,GAAG,CAAC,IAAIA,SAAS,GAAG,CAAC,EAAE;MAChDC,KAAK,CAAC,qBAAqB,CAAC;MAC5B;IACF;;IAEA;IACA,MAAMC,MAAM,GAAG,GAAGC,MAAM,CAACV,aAAa,CAAC,IAAIU,MAAM,CAACX,QAAQ,CAAC,EAAE;IAC7D,MAAML,MAAM,CAACD,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEa,MAAM,CAAC,EAAE;MACrCE,EAAE,EAAEF,MAAM;MACVG,OAAO,EAAEF,MAAM,CAACV,aAAa,CAAC;MAC9Ba,MAAM,EAAEH,MAAM,CAACX,QAAQ,CAAC;MACxBe,IAAI,EAAEC,UAAU,CAACR,SAAS,CAAC;MAC3BS,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,CAAC;;IAEF;IACA,MAAMC,QAAQ,GAAGf,KAAK,CAACgB,MAAM,CAACC,CAAC,IAAI,EAAEA,CAAC,CAACC,QAAQ,KAAKrB,aAAa,IAAIoB,CAAC,CAACE,SAAS,KAAKvB,QAAQ,CAAC,CAAC;IAC/FmB,QAAQ,CAACK,IAAI,CAAC;MAAEF,QAAQ,EAAErB,aAAa;MAAEsB,SAAS,EAAEvB,QAAQ;MAAEe,IAAI,EAAEC,UAAU,CAACR,SAAS;IAAE,CAAC,CAAC;IAC5FH,QAAQ,CAACc,QAAQ,CAAC;IAClBb,cAAc,CAAC,IAAI,CAAC;IACpBH,aAAa,CAAC;MAAE,GAAGD,UAAU;MAAE,CAACF,QAAQ,GAAG;IAAG,CAAC,CAAC;EAClD,CAAC;EAED,MAAMyB,QAAQ,GAAG,MAAAA,CAAOzB,QAAQ,EAAEC,aAAa,EAAEyB,SAAS,EAAEC,YAAY,EAAEC,OAAO,EAAEC,UAAU,EAAEtB,gBAAgB,KAAK;IAClH,MAAMuB,SAAS,GAAGJ,SAAS,CAAC1B,QAAQ,CAAC,IAAI,CAAC;;IAE1C;IACA,MAAM+B,MAAM,GAAG,GAAGpB,MAAM,CAACV,aAAa,CAAC,IAAIU,MAAM,CAACX,QAAQ,CAAC,EAAE;IAC7D,MAAMgC,OAAO,GAAGtC,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEkC,MAAM,CAAC;;IAExC;IACA,MAAME,WAAW,GAAGL,OAAO,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACb,QAAQ,KAAKrB,aAAa,IAAIkC,CAAC,CAACZ,SAAS,KAAKvB,QAAQ,CAAC;IAC/F,MAAMoC,aAAa,GAAG,CAAC,CAAC,CAAC;IACzB,MAAMC,cAAc,GAAG,CAAC,CAAC,CAAC;;IAE1B,MAAM1C,MAAM,CAACqC,OAAO,EAAE;MACpBpB,EAAE,EAAEmB,MAAM;MACVlB,OAAO,EAAEF,MAAM,CAACV,aAAa,CAAC;MAC9Ba,MAAM,EAAEH,MAAM,CAACX,QAAQ,CAAC;MACxBsC,IAAI,EAAEC,QAAQ,CAACT,SAAS,CAAC,IAAI,CAAC;MAC9BU,UAAU,EAAEJ,aAAa;MACzBK,eAAe,EAAEJ,cAAc;MAC/BpB,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,EAAE;MAAEwB,KAAK,EAAE;IAAK,CAAC,CAAC;;IAEnB;IACA,MAAMC,UAAU,GAAGf,OAAO,CAACR,MAAM,CAACe,CAAC,IAAI,EAAEA,CAAC,CAACb,QAAQ,KAAKrB,aAAa,IAAIkC,CAAC,CAACZ,SAAS,KAAKvB,QAAQ,CAAC,CAAC;IACnG,IAAI8B,SAAS,GAAG,CAAC,EAAE;MACjBa,UAAU,CAACnB,IAAI,CAAC;QAAEF,QAAQ,EAAErB,aAAa;QAAEsB,SAAS,EAAEvB,QAAQ;QAAEsC,IAAI,EAAEC,QAAQ,CAACT,SAAS;MAAE,CAAC,CAAC;IAC9F;IACAD,UAAU,CAACc,UAAU,CAAC;IACtBhB,YAAY,CAAC;MAAE,GAAGD,SAAS;MAAE,CAAC1B,QAAQ,GAAG;IAAG,CAAC,CAAC;EAChD,CAAC;EAED,MAAM4C,SAAS,GAAG,MAAAA,CAAO5C,QAAQ,EAAEC,aAAa,EAAE4C,WAAW,EAAEC,cAAc,EAAEN,UAAU,EAAEO,aAAa,EAAExC,gBAAgB,KAAK;IAC7H,MAAMyC,UAAU,GAAGH,WAAW,CAAC7C,QAAQ,CAAC,IAAI,CAAC;;IAE7C;IACA,MAAM+B,MAAM,GAAG,GAAGpB,MAAM,CAACV,aAAa,CAAC,IAAIU,MAAM,CAACX,QAAQ,CAAC,EAAE;IAC7D,MAAML,MAAM,CAACD,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEkC,MAAM,CAAC,EAAE;MACrCnB,EAAE,EAAEmB,MAAM;MACVlB,OAAO,EAAEF,MAAM,CAACV,aAAa,CAAC;MAC9Ba,MAAM,EAAEH,MAAM,CAACX,QAAQ,CAAC;MACxBwC,UAAU,EAAED,QAAQ,CAACS,UAAU,CAAC,IAAI,CAAC;MACrC/B,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,EAAE;MAAEwB,KAAK,EAAE;IAAK,CAAC,CAAC;;IAEnB;IACA,MAAMO,QAAQ,GAAGT,UAAU,CAACpB,MAAM,CAAC8B,CAAC,IAAI,EAAEA,CAAC,CAAC5B,QAAQ,KAAKrB,aAAa,IAAIiD,CAAC,CAAC3B,SAAS,KAAKvB,QAAQ,CAAC,CAAC;IACpG,IAAIgD,UAAU,GAAG,CAAC,EAAE;MAClBC,QAAQ,CAACzB,IAAI,CAAC;QAAEF,QAAQ,EAAErB,aAAa;QAAEsB,SAAS,EAAEvB,QAAQ;QAAEmD,KAAK,EAAEZ,QAAQ,CAACS,UAAU;MAAE,CAAC,CAAC;IAC9F;IACAD,aAAa,CAACE,QAAQ,CAAC;IACvBH,cAAc,CAAC;MAAE,GAAGD,WAAW;MAAE,CAAC7C,QAAQ,GAAG;IAAG,CAAC,CAAC;EACpD,CAAC;EAED,MAAMoD,UAAU,GAAG,MAAAA,CAAOpD,QAAQ,EAAEC,aAAa,EAAEoD,YAAY,EAAEC,eAAe,EAAEC,OAAO,EAAEC,UAAU,EAAEjD,gBAAgB,KAAK;IAC1H,MAAMkD,WAAW,GAAGJ,YAAY,CAACrD,QAAQ,CAAC,IAAI,CAAC;;IAE/C;IACA,MAAM+B,MAAM,GAAG,GAAGpB,MAAM,CAACV,aAAa,CAAC,IAAIU,MAAM,CAACX,QAAQ,CAAC,EAAE;IAC7D,MAAML,MAAM,CAACD,GAAG,CAACG,EAAE,EAAE,OAAO,EAAEkC,MAAM,CAAC,EAAE;MACrCnB,EAAE,EAAEmB,MAAM;MACVlB,OAAO,EAAEF,MAAM,CAACV,aAAa,CAAC;MAC9Ba,MAAM,EAAEH,MAAM,CAACX,QAAQ,CAAC;MACxByC,eAAe,EAAEF,QAAQ,CAACkB,WAAW,CAAC,IAAI,CAAC;MAC3CxC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,EAAE;MAAEwB,KAAK,EAAE;IAAK,CAAC,CAAC;;IAEnB;IACA,MAAMgB,SAAS,GAAGH,OAAO,CAACnC,MAAM,CAACuC,CAAC,IAAI,EAAEA,CAAC,CAACrC,QAAQ,KAAKrB,aAAa,IAAI0D,CAAC,CAACpC,SAAS,KAAKvB,QAAQ,CAAC,CAAC;IAClG,IAAIyD,WAAW,GAAG,CAAC,EAAE;MACnBC,SAAS,CAAClC,IAAI,CAAC;QAAEF,QAAQ,EAAErB,aAAa;QAAEsB,SAAS,EAAEvB,QAAQ;QAAE4D,MAAM,EAAErB,QAAQ,CAACkB,WAAW;MAAE,CAAC,CAAC;IACjG;IACAD,UAAU,CAACE,SAAS,CAAC;IACrBJ,eAAe,CAAC;MAAE,GAAGD,YAAY;MAAE,CAACrD,QAAQ,GAAG;IAAG,CAAC,CAAC;EACtD,CAAC;EAED,OAAO;IACLD,QAAQ;IACR0B,QAAQ;IACRmB,SAAS;IACTQ;EACF,CAAC;AACH,CAAC;AAED,eAAetD,eAAe","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}