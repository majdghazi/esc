{"ast":null,"code":"import { doc, setDoc, deleteDoc, updateDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nconst useConvocations = () => {\n  const convoquerJoueur = async (matchId, joueurId, convocations, setConvocations) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'convocations', convocId), {\n      id: convocId,\n      matchId: String(matchId),\n      userId: String(joueurId),\n      convoque: true,\n      statut: 'en_attente',\n      createdAt: new Date()\n    });\n    const newConvocs = [...convocations];\n    newConvocs.push({\n      id_match: matchId,\n      id_joueur: joueurId,\n      convoque: true,\n      statut: 'en_attente'\n    });\n    setConvocations(newConvocs);\n  };\n  const deconvoquerJoueur = async (matchId, joueurId, convocations, setConvocations) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await deleteDoc(doc(db, 'convocations', convocId));\n    const newConvocs = convocations.filter(c => !(c.id_match === matchId && c.id_joueur === joueurId));\n    setConvocations(newConvocs);\n  };\n  const accepterConvocation = async (matchId, joueurId, user, convocations, setConvocations, setActionJoueurEnCours) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await updateDoc(doc(db, 'convocations', convocId), {\n      statut: 'accepte'\n    });\n    const newConvocs = convocations.map(c => c.id_match === matchId && c.id_joueur === joueurId ? {\n      ...c,\n      statut: 'accepte'\n    } : c);\n    setConvocations(newConvocs);\n    if ((user === null || user === void 0 ? void 0 : user.role) === 'joueur' && user.id === joueurId) {\n      setActionJoueurEnCours(true);\n    }\n  };\n  const refuserConvocation = async (matchId, joueurId, user, convocations, setConvocations, setActionJoueurEnCours) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await updateDoc(doc(db, 'convocations', convocId), {\n      statut: 'refuse'\n    });\n    const newConvocs = convocations.map(c => c.id_match === matchId && c.id_joueur === joueurId ? {\n      ...c,\n      statut: 'refuse'\n    } : c);\n    setConvocations(newConvocs);\n    if ((user === null || user === void 0 ? void 0 : user.role) === 'joueur' && user.id === joueurId) {\n      setActionJoueurEnCours(true);\n    }\n  };\n  return {\n    convoquerJoueur,\n    deconvoquerJoueur,\n    accepterConvocation,\n    refuserConvocation\n  };\n};\nexport default useConvocations;","map":{"version":3,"names":["doc","setDoc","deleteDoc","updateDoc","db","useConvocations","convoquerJoueur","matchId","joueurId","convocations","setConvocations","convocId","String","id","userId","convoque","statut","createdAt","Date","newConvocs","push","id_match","id_joueur","deconvoquerJoueur","filter","c","accepterConvocation","user","setActionJoueurEnCours","map","role","refuserConvocation"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useConvocations.js"],"sourcesContent":["import { doc, setDoc, deleteDoc, updateDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nconst useConvocations = () => {\n  const convoquerJoueur = async (matchId, joueurId, convocations, setConvocations) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await setDoc(doc(db, 'convocations', convocId), {\n      id: convocId,\n      matchId: String(matchId),\n      userId: String(joueurId),\n      convoque: true,\n      statut: 'en_attente',\n      createdAt: new Date()\n    });\n    \n    const newConvocs = [...convocations];\n    newConvocs.push({ id_match: matchId, id_joueur: joueurId, convoque: true, statut: 'en_attente' });\n    setConvocations(newConvocs);\n  };\n\n  const deconvoquerJoueur = async (matchId, joueurId, convocations, setConvocations) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await deleteDoc(doc(db, 'convocations', convocId));\n    \n    const newConvocs = convocations.filter(c => !(c.id_match === matchId && c.id_joueur === joueurId));\n    setConvocations(newConvocs);\n  };\n\n  const accepterConvocation = async (matchId, joueurId, user, convocations, setConvocations, setActionJoueurEnCours) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await updateDoc(doc(db, 'convocations', convocId), {\n      statut: 'accepte'\n    });\n    \n    const newConvocs = convocations.map(c =>\n      c.id_match === matchId && c.id_joueur === joueurId\n        ? { ...c, statut: 'accepte' }\n        : c\n    );\n    setConvocations(newConvocs);\n    if (user?.role === 'joueur' && user.id === joueurId) {\n      setActionJoueurEnCours(true);\n    }\n  };\n\n  const refuserConvocation = async (matchId, joueurId, user, convocations, setConvocations, setActionJoueurEnCours) => {\n    const convocId = `${String(matchId)}_${String(joueurId)}`;\n    await updateDoc(doc(db, 'convocations', convocId), {\n      statut: 'refuse'\n    });\n    \n    const newConvocs = convocations.map(c =>\n      c.id_match === matchId && c.id_joueur === joueurId\n        ? { ...c, statut: 'refuse' }\n        : c\n    );\n    setConvocations(newConvocs);\n    if (user?.role === 'joueur' && user.id === joueurId) {\n      setActionJoueurEnCours(true);\n    }\n  };\n\n  return {\n    convoquerJoueur,\n    deconvoquerJoueur,\n    accepterConvocation,\n    refuserConvocation\n  };\n};\n\nexport default useConvocations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}