{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nexport const useFirestore = user => {\n  _s();\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [stats, setStats] = useState({\n    buteurs: [],\n    tempsDeJeu: [],\n    passesD: []\n  });\n  const [evaluations, setEvaluations] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const loadConvocations = async () => {\n    const convocsSnap = await getDocs(collection(db, 'convocations'));\n    setConvocations(convocsSnap.docs.map(d => ({\n      id_match: d.data().matchId,\n      id_joueur: d.data().userId,\n      convoque: d.data().convoque,\n      statut: d.data().statut\n    })));\n  };\n  useEffect(() => {\n    if (!user) return;\n    const loadData = async () => {\n      try {\n        const usersSnap = await getDocs(collection(db, 'users'));\n        setJoueurs(usersSnap.docs.map(d => ({\n          ...d.data(),\n          id: d.data().id || d.id\n        })));\n        const matchesSnap = await getDocs(collection(db, 'matches'));\n        const matchesData = matchesSnap.docs.map(d => ({\n          id: d.data().id,\n          date: d.data().date.toDate().toISOString().split('T')[0],\n          adversaire: d.data().adversaire,\n          domicile: d.data().domicile ? 'true' : 'false',\n          statut: d.data().statut,\n          scoreEquipe: d.data().scoreEquipe || 0,\n          scoreAdversaire: d.data().scoreAdversaire || 0\n        }));\n        matchesData.sort((a, b) => new Date(a.date) - new Date(b.date));\n        setMatchs(matchesData);\n        await loadConvocations();\n        const notesSnap = await getDocs(collection(db, 'notes'));\n        setNotes(notesSnap.docs.map(d => ({\n          id_match: d.data().matchId,\n          id_joueur: d.data().userId,\n          note: d.data().note\n        })));\n        const statsSnap = await getDocs(collection(db, 'stats'));\n        const buteursArr = [];\n        const tempsArr = [];\n        const passesArr = [];\n        statsSnap.docs.forEach(d => {\n          const data = d.data();\n          if (data.buts > 0) buteursArr.push({\n            id_match: data.matchId,\n            id_joueur: data.userId,\n            buts: data.buts\n          });\n          if (data.tempsDeJeu > 0) tempsArr.push({\n            id_match: data.matchId,\n            id_joueur: data.userId,\n            temps: data.tempsDeJeu\n          });\n          if (data.passesDecisives > 0) passesArr.push({\n            id_match: data.matchId,\n            id_joueur: data.userId,\n            passes: data.passesDecisives\n          });\n        });\n        setStats({\n          buteurs: buteursArr,\n          tempsDeJeu: tempsArr,\n          passesD: passesArr\n        });\n        const evalsSnap = await getDocs(collection(db, 'evaluations'));\n        setEvaluations(evalsSnap.docs.map(d => {\n          var _d$data$updatedAt;\n          return {\n            id_joueur: d.data().evaluateurId,\n            id_coach: d.data().coachId,\n            entrainements: d.data().entrainements,\n            coaching: d.data().coaching,\n            relation: d.data().relation,\n            note_globale: d.data().noteGlobale,\n            derniere_modification: (_d$data$updatedAt = d.data().updatedAt) === null || _d$data$updatedAt === void 0 ? void 0 : _d$data$updatedAt.toDate()\n          };\n        }));\n        setLoading(false);\n      } catch (error) {\n        console.error('Erreur:', error);\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, [user]);\n  return {\n    joueurs,\n    matchs,\n    convocations,\n    notes,\n    buteurs: stats.buteurs,\n    tempsDeJeu: stats.tempsDeJeu,\n    passesD: stats.passesD,\n    evaluationsCoach: evaluations,\n    loading,\n    setNotes,\n    setConvocations,\n    loadConvocations\n  };\n};\n_s(useFirestore, \"pXPBTY5TjCwaDwXPXhq8ME9SEHE=\");","map":{"version":3,"names":["useState","useEffect","collection","getDocs","db","useFirestore","user","_s","joueurs","setJoueurs","matchs","setMatchs","convocations","setConvocations","notes","setNotes","stats","setStats","buteurs","tempsDeJeu","passesD","evaluations","setEvaluations","loading","setLoading","loadConvocations","convocsSnap","docs","map","d","id_match","data","matchId","id_joueur","userId","convoque","statut","loadData","usersSnap","id","matchesSnap","matchesData","date","toDate","toISOString","split","adversaire","domicile","scoreEquipe","scoreAdversaire","sort","a","b","Date","notesSnap","note","statsSnap","buteursArr","tempsArr","passesArr","forEach","buts","push","temps","passesDecisives","passes","evalsSnap","_d$data$updatedAt","evaluateurId","id_coach","coachId","entrainements","coaching","relation","note_globale","noteGlobale","derniere_modification","updatedAt","error","console","evaluationsCoach"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useFirestore.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nexport const useFirestore = (user) => {\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [stats, setStats] = useState({ buteurs: [], tempsDeJeu: [], passesD: [] });\n  const [evaluations, setEvaluations] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const loadConvocations = async () => {\n    const convocsSnap = await getDocs(collection(db, 'convocations'));\n    setConvocations(convocsSnap.docs.map(d => ({\n      id_match: d.data().matchId,\n      id_joueur: d.data().userId,\n      convoque: d.data().convoque,\n      statut: d.data().statut\n    })));\n  };\n\n  useEffect(() => {\n    if (!user) return;\n    \n    const loadData = async () => {\n      try {\n        const usersSnap = await getDocs(collection(db, 'users'));\n        setJoueurs(usersSnap.docs.map(d => ({ ...d.data(), id: d.data().id || d.id })));\n        \n        const matchesSnap = await getDocs(collection(db, 'matches'));\n        const matchesData = matchesSnap.docs.map(d => ({\n          id: d.data().id,\n          date: d.data().date.toDate().toISOString().split('T')[0],\n          adversaire: d.data().adversaire,\n          domicile: d.data().domicile ? 'true' : 'false',\n          statut: d.data().statut,\n          scoreEquipe: d.data().scoreEquipe || 0,\n          scoreAdversaire: d.data().scoreAdversaire || 0\n        }));\n        matchesData.sort((a, b) => new Date(a.date) - new Date(b.date));\n        setMatchs(matchesData);\n        \n        await loadConvocations();\n        \n        const notesSnap = await getDocs(collection(db, 'notes'));\n        setNotes(notesSnap.docs.map(d => ({\n          id_match: d.data().matchId,\n          id_joueur: d.data().userId,\n          note: d.data().note\n        })));\n        \n        const statsSnap = await getDocs(collection(db, 'stats'));\n        const buteursArr = [];\n        const tempsArr = [];\n        const passesArr = [];\n        \n        statsSnap.docs.forEach(d => {\n          const data = d.data();\n          if (data.buts > 0) buteursArr.push({ id_match: data.matchId, id_joueur: data.userId, buts: data.buts });\n          if (data.tempsDeJeu > 0) tempsArr.push({ id_match: data.matchId, id_joueur: data.userId, temps: data.tempsDeJeu });\n          if (data.passesDecisives > 0) passesArr.push({ id_match: data.matchId, id_joueur: data.userId, passes: data.passesDecisives });\n        });\n        \n        setStats({ buteurs: buteursArr, tempsDeJeu: tempsArr, passesD: passesArr });\n        \n        const evalsSnap = await getDocs(collection(db, 'evaluations'));\n        setEvaluations(evalsSnap.docs.map(d => ({\n          id_joueur: d.data().evaluateurId,\n          id_coach: d.data().coachId,\n          entrainements: d.data().entrainements,\n          coaching: d.data().coaching,\n          relation: d.data().relation,\n          note_globale: d.data().noteGlobale,\n          derniere_modification: d.data().updatedAt?.toDate()\n        })));\n        \n        setLoading(false);\n      } catch (error) {\n        console.error('Erreur:', error);\n        setLoading(false);\n      }\n    };\n    \n    loadData();\n  }, [user]);\n\n  return {\n    joueurs,\n    matchs,\n    convocations,\n    notes,\n    buteurs: stats.buteurs,\n    tempsDeJeu: stats.tempsDeJeu,\n    passesD: stats.passesD,\n    evaluationsCoach: evaluations,\n    loading,\n    setNotes,\n    setConvocations,\n    loadConvocations\n  };\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}