{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nimport { collection, getDocs, setDoc, doc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nconst useFirestore = user => {\n  _s();\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [actionJoueurEnCours, setActionJoueurEnCours] = useState(false);\n  const isInitialLoad = useRef(true);\n\n  // Lire une collection Firestore\n  const lireCollection = async nomCollection => {\n    try {\n      const querySnapshot = await getDocs(collection(db, nomCollection));\n      const data = [];\n      querySnapshot.forEach(doc => {\n        data.push({\n          ...doc.data(),\n          docId: doc.id\n        });\n      });\n      return data;\n    } catch (error) {\n      console.error(`Erreur lecture ${nomCollection}:`, error);\n      return [];\n    }\n  };\n\n  // √âcrire une collection Firestore (SAFE: sync intelligent sans suppression massive)\n  const ecrireCollection = async (nomCollection, donnees) => {\n    try {\n      console.log(`üíæ Sync ${nomCollection}: ${donnees.length} √©l√©ments`);\n\n      // PROTECTION: Ne JAMAIS traiter un tableau vide\n      if (!donnees || donnees.length === 0) {\n        console.error(`‚ö†Ô∏è BLOQU√â: Tentative d'√©criture de ${nomCollection} vide`);\n        return;\n      }\n\n      // Lire les documents existants\n      const querySnapshot = await getDocs(collection(db, nomCollection));\n      const existingDocs = new Map();\n      querySnapshot.forEach(docSnapshot => {\n        existingDocs.set(docSnapshot.id, docSnapshot.data());\n      });\n\n      // Construire la liste des IDs actuels\n      const newIds = new Set();\n      const writePromises = [];\n\n      // √âcrire/Mettre √† jour les documents\n      donnees.forEach((item, index) => {\n        const docId = item.id || item.docId || `doc_${index}`;\n        newIds.add(docId);\n        const docData = {\n          ...item\n        };\n        delete docData.docId; // Nettoyer le champ docId avant l'√©criture\n\n        writePromises.push(setDoc(doc(db, nomCollection, docId), docData));\n      });\n      await Promise.all(writePromises);\n\n      // Supprimer UNIQUEMENT les documents qui ne sont plus dans la nouvelle liste\n      // ET seulement s'il y en a moins de 10% √† supprimer (s√©curit√©)\n      const toDelete = [];\n      existingDocs.forEach((_, docId) => {\n        if (!newIds.has(docId)) {\n          toDelete.push(docId);\n        }\n      });\n      if (toDelete.length > 0) {\n        const deleteRatio = toDelete.length / existingDocs.size;\n        if (deleteRatio > 0.1) {\n          console.error(`‚ö†Ô∏è S√âCURIT√â: Tentative de suppression de ${(deleteRatio * 100).toFixed(0)}% des docs dans ${nomCollection} - BLOQU√â`);\n        } else {\n          const deletePromises = toDelete.map(docId => deleteDoc(doc(db, nomCollection, docId)));\n          await Promise.all(deletePromises);\n          console.log(`üóëÔ∏è  ${nomCollection}: ${toDelete.length} docs obsol√®tes supprim√©s`);\n        }\n      }\n      console.log(`‚úÖ ${nomCollection} synchronis√©: ${donnees.length} docs`);\n    } catch (error) {\n      console.error(`‚ùå Erreur √©criture ${nomCollection}:`, error);\n    }\n  };\n  const chargerDonnees = async () => {\n    setLoading(true);\n    try {\n      const [joueursData, matchsData, convocsData, notesData, buteursData, tempsData, passesData, evaluationsData] = await Promise.all([lireCollection('joueurs'), lireCollection('matchs'), lireCollection('convocations'), lireCollection('notes'), lireCollection('buteurs'), lireCollection('temps_de_jeu'), lireCollection('passes_d'), lireCollection('evaluations_coach')]);\n      console.log('üì• Donn√©es charg√©es depuis Firebase:', {\n        joueurs: joueursData.length,\n        matchs: matchsData.length,\n        convocations: convocsData.length,\n        notes: notesData.length,\n        buteurs: buteursData.length,\n        tempsDeJeu: tempsData.length,\n        passesD: passesData.length,\n        evaluationsCoach: evaluationsData.length\n      });\n      setJoueurs(joueursData);\n      setMatchs(matchsData);\n      setConvocations(convocsData);\n      setNotes(notesData);\n      setButeurs(buteursData);\n      setTempsDeJeu(tempsData);\n      setPassesD(passesData);\n      setEvaluationsCoach(evaluationsData);\n    } catch (error) {\n      console.error('Erreur chargement donn√©es:', error);\n    } finally {\n      setLoading(false);\n      isInitialLoad.current = false;\n    }\n  };\n\n  // Auto-save Convocations\n  useEffect(() => {\n    if (!isInitialLoad.current && user && convocations.length > 0) {\n      if (user.role === 'coach' || user.role === 'coach_adjoint') {\n        ecrireCollection('convocations', convocations); // minuscule\n      } else if (user.role === 'joueur' && actionJoueurEnCours) {\n        ecrireCollection('convocations', convocations); // minuscule\n        setActionJoueurEnCours(false);\n      }\n    } else if (!isInitialLoad.current && user && convocations.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de convocations vides BLOQU√âE');\n    }\n  }, [convocations, user, actionJoueurEnCours]);\n\n  // Auto-save Notes\n  useEffect(() => {\n    if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && notes.length > 0) {\n      ecrireCollection('notes', notes);\n    } else if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && notes.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de notes vides BLOQU√âE');\n    }\n  }, [notes, user]);\n\n  // Auto-save Buteurs\n  useEffect(() => {\n    if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && buteurs.length > 0) {\n      ecrireCollection('buteurs', buteurs);\n    } else if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && buteurs.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de buteurs vides BLOQU√âE');\n    }\n  }, [buteurs, user]);\n\n  // Auto-save Temps de jeu\n  useEffect(() => {\n    if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && tempsDeJeu.length > 0) {\n      ecrireCollection('temps_de_jeu', tempsDeJeu);\n    } else if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && tempsDeJeu.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de temps_de_jeu vides BLOQU√âE');\n    }\n  }, [tempsDeJeu, user]);\n\n  // Auto-save Passes D\n  useEffect(() => {\n    if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && passesD.length > 0) {\n      ecrireCollection('passes_d', passesD);\n    } else if (!isInitialLoad.current && ((user === null || user === void 0 ? void 0 : user.role) === 'coach' || (user === null || user === void 0 ? void 0 : user.role) === 'coach_adjoint') && passesD.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de passes_d vides BLOQU√âE');\n    }\n  }, [passesD, user]);\n\n  // Auto-save Matchs\n  useEffect(() => {\n    if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && matchs.length > 0) {\n      console.log('üíæ Sauvegarde Matchs:', matchs.length, 'matchs');\n      ecrireCollection('matchs', matchs);\n    } else if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'coach' && matchs.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de matchs vides BLOQU√âE');\n    }\n  }, [matchs, user]);\n\n  // Auto-save Evaluations\n  useEffect(() => {\n    if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'joueur' && evaluationsCoach.length > 0) {\n      ecrireCollection('evaluations_coach', evaluationsCoach);\n    } else if (!isInitialLoad.current && (user === null || user === void 0 ? void 0 : user.role) === 'joueur' && evaluationsCoach.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de evaluations_coach vides BLOQU√âE');\n    }\n  }, [evaluationsCoach, user]);\n  return {\n    joueurs,\n    setJoueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    chargerDonnees,\n    actionJoueurEnCours,\n    setActionJoueurEnCours\n  };\n};\n_s(useFirestore, \"jM39Ms0SfzgCl78qnapFK1SPMGY=\");\nexport default useFirestore;","map":{"version":3,"names":["useState","useEffect","useRef","collection","getDocs","setDoc","doc","deleteDoc","db","useFirestore","user","_s","joueurs","setJoueurs","matchs","setMatchs","convocations","setConvocations","notes","setNotes","buteurs","setButeurs","tempsDeJeu","setTempsDeJeu","passesD","setPassesD","evaluationsCoach","setEvaluationsCoach","loading","setLoading","actionJoueurEnCours","setActionJoueurEnCours","isInitialLoad","lireCollection","nomCollection","querySnapshot","data","forEach","push","docId","id","error","console","ecrireCollection","donnees","log","length","existingDocs","Map","docSnapshot","set","newIds","Set","writePromises","item","index","add","docData","Promise","all","toDelete","_","has","deleteRatio","size","toFixed","deletePromises","map","chargerDonnees","joueursData","matchsData","convocsData","notesData","buteursData","tempsData","passesData","evaluationsData","current","role"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useFirestore.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { collection, getDocs, setDoc, doc, deleteDoc } from 'firebase/firestore';\nimport { db } from '../config/firebase';\n\nconst useFirestore = (user) => {\n  const [joueurs, setJoueurs] = useState([]);\n  const [matchs, setMatchs] = useState([]);\n  const [convocations, setConvocations] = useState([]);\n  const [notes, setNotes] = useState([]);\n  const [buteurs, setButeurs] = useState([]);\n  const [tempsDeJeu, setTempsDeJeu] = useState([]);\n  const [passesD, setPassesD] = useState([]);\n  const [evaluationsCoach, setEvaluationsCoach] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [actionJoueurEnCours, setActionJoueurEnCours] = useState(false);\n\n  const isInitialLoad = useRef(true);\n\n  // Lire une collection Firestore\n  const lireCollection = async (nomCollection) => {\n    try {\n      const querySnapshot = await getDocs(collection(db, nomCollection));\n      const data = [];\n      querySnapshot.forEach((doc) => {\n        data.push({ ...doc.data(), docId: doc.id });\n      });\n      return data;\n    } catch (error) {\n      console.error(`Erreur lecture ${nomCollection}:`, error);\n      return [];\n    }\n  };\n\n  // √âcrire une collection Firestore (SAFE: sync intelligent sans suppression massive)\n  const ecrireCollection = async (nomCollection, donnees) => {\n    try {\n      console.log(`üíæ Sync ${nomCollection}: ${donnees.length} √©l√©ments`);\n\n      // PROTECTION: Ne JAMAIS traiter un tableau vide\n      if (!donnees || donnees.length === 0) {\n        console.error(`‚ö†Ô∏è BLOQU√â: Tentative d'√©criture de ${nomCollection} vide`);\n        return;\n      }\n\n      // Lire les documents existants\n      const querySnapshot = await getDocs(collection(db, nomCollection));\n      const existingDocs = new Map();\n      querySnapshot.forEach((docSnapshot) => {\n        existingDocs.set(docSnapshot.id, docSnapshot.data());\n      });\n\n      // Construire la liste des IDs actuels\n      const newIds = new Set();\n      const writePromises = [];\n\n      // √âcrire/Mettre √† jour les documents\n      donnees.forEach((item, index) => {\n        const docId = item.id || item.docId || `doc_${index}`;\n        newIds.add(docId);\n\n        const docData = { ...item };\n        delete docData.docId; // Nettoyer le champ docId avant l'√©criture\n\n        writePromises.push(setDoc(doc(db, nomCollection, docId), docData));\n      });\n\n      await Promise.all(writePromises);\n\n      // Supprimer UNIQUEMENT les documents qui ne sont plus dans la nouvelle liste\n      // ET seulement s'il y en a moins de 10% √† supprimer (s√©curit√©)\n      const toDelete = [];\n      existingDocs.forEach((_, docId) => {\n        if (!newIds.has(docId)) {\n          toDelete.push(docId);\n        }\n      });\n\n      if (toDelete.length > 0) {\n        const deleteRatio = toDelete.length / existingDocs.size;\n        if (deleteRatio > 0.1) {\n          console.error(`‚ö†Ô∏è S√âCURIT√â: Tentative de suppression de ${(deleteRatio * 100).toFixed(0)}% des docs dans ${nomCollection} - BLOQU√â`);\n        } else {\n          const deletePromises = toDelete.map(docId =>\n            deleteDoc(doc(db, nomCollection, docId))\n          );\n          await Promise.all(deletePromises);\n          console.log(`üóëÔ∏è  ${nomCollection}: ${toDelete.length} docs obsol√®tes supprim√©s`);\n        }\n      }\n\n      console.log(`‚úÖ ${nomCollection} synchronis√©: ${donnees.length} docs`);\n    } catch (error) {\n      console.error(`‚ùå Erreur √©criture ${nomCollection}:`, error);\n    }\n  };\n\n  const chargerDonnees = async () => {\n    setLoading(true);\n    try {\n      const [joueursData, matchsData, convocsData, notesData, buteursData, tempsData, passesData, evaluationsData] = await Promise.all([\n        lireCollection('joueurs'),\n        lireCollection('matchs'),\n        lireCollection('convocations'),\n        lireCollection('notes'),\n        lireCollection('buteurs'),\n        lireCollection('temps_de_jeu'),\n        lireCollection('passes_d'),\n        lireCollection('evaluations_coach')\n      ]);\n\n      console.log('üì• Donn√©es charg√©es depuis Firebase:', {\n        joueurs: joueursData.length,\n        matchs: matchsData.length,\n        convocations: convocsData.length,\n        notes: notesData.length,\n        buteurs: buteursData.length,\n        tempsDeJeu: tempsData.length,\n        passesD: passesData.length,\n        evaluationsCoach: evaluationsData.length\n      });\n\n      setJoueurs(joueursData);\n      setMatchs(matchsData);\n      setConvocations(convocsData);\n      setNotes(notesData);\n      setButeurs(buteursData);\n      setTempsDeJeu(tempsData);\n      setPassesD(passesData);\n      setEvaluationsCoach(evaluationsData);\n    } catch (error) {\n      console.error('Erreur chargement donn√©es:', error);\n    } finally {\n      setLoading(false);\n      isInitialLoad.current = false;\n    }\n  };\n\n  // Auto-save Convocations\n  useEffect(() => {\n    if (!isInitialLoad.current && user && convocations.length > 0) {\n      if (user.role === 'coach' || user.role === 'coach_adjoint') {\n        ecrireCollection('convocations', convocations); // minuscule\n      } else if (user.role === 'joueur' && actionJoueurEnCours) {\n        ecrireCollection('convocations', convocations); // minuscule\n        setActionJoueurEnCours(false);\n      }\n    } else if (!isInitialLoad.current && user && convocations.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de convocations vides BLOQU√âE');\n    }\n  }, [convocations, user, actionJoueurEnCours]);\n\n  // Auto-save Notes\n  useEffect(() => {\n    if (!isInitialLoad.current && user?.role === 'coach' && notes.length > 0) {\n      ecrireCollection('notes', notes);\n    } else if (!isInitialLoad.current && user?.role === 'coach' && notes.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de notes vides BLOQU√âE');\n    }\n  }, [notes, user]);\n\n  // Auto-save Buteurs\n  useEffect(() => {\n    if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && buteurs.length > 0) {\n      ecrireCollection('buteurs', buteurs);\n    } else if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && buteurs.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de buteurs vides BLOQU√âE');\n    }\n  }, [buteurs, user]);\n\n  // Auto-save Temps de jeu\n  useEffect(() => {\n    if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && tempsDeJeu.length > 0) {\n      ecrireCollection('temps_de_jeu', tempsDeJeu);\n    } else if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && tempsDeJeu.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de temps_de_jeu vides BLOQU√âE');\n    }\n  }, [tempsDeJeu, user]);\n\n  // Auto-save Passes D\n  useEffect(() => {\n    if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && passesD.length > 0) {\n      ecrireCollection('passes_d', passesD);\n    } else if (!isInitialLoad.current && (user?.role === 'coach' || user?.role === 'coach_adjoint') && passesD.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de passes_d vides BLOQU√âE');\n    }\n  }, [passesD, user]);\n\n  // Auto-save Matchs\n  useEffect(() => {\n    if (!isInitialLoad.current && user?.role === 'coach' && matchs.length > 0) {\n      console.log('üíæ Sauvegarde Matchs:', matchs.length, 'matchs');\n      ecrireCollection('matchs', matchs);\n    } else if (!isInitialLoad.current && user?.role === 'coach' && matchs.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de matchs vides BLOQU√âE');\n    }\n  }, [matchs, user]);\n\n  // Auto-save Evaluations\n  useEffect(() => {\n    if (!isInitialLoad.current && user?.role === 'joueur' && evaluationsCoach.length > 0) {\n      ecrireCollection('evaluations_coach', evaluationsCoach);\n    } else if (!isInitialLoad.current && user?.role === 'joueur' && evaluationsCoach.length === 0) {\n      console.error('‚ö†Ô∏è ALERTE: Tentative d\\'√©criture de evaluations_coach vides BLOQU√âE');\n    }\n  }, [evaluationsCoach, user]);\n\n  return {\n    joueurs,\n    setJoueurs,\n    matchs,\n    setMatchs,\n    convocations,\n    setConvocations,\n    notes,\n    setNotes,\n    buteurs,\n    setButeurs,\n    tempsDeJeu,\n    setTempsDeJeu,\n    passesD,\n    setPassesD,\n    evaluationsCoach,\n    setEvaluationsCoach,\n    loading,\n    chargerDonnees,\n    actionJoueurEnCours,\n    setActionJoueurEnCours\n  };\n};\n\nexport default useFirestore;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}