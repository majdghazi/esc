{"ast":null,"code":"import{useState,useEffect}from'react';import{calculerMoyenne}from'../utils/noteCalculator';const useEvaluations=()=>{const[evalIsma,setEvalIsma]=useState({entrainements:'',coaching:'',relation:''});const[evalAdam,setEvalAdam]=useState({entrainements:'',coaching:'',relation:''});const loadEvaluations=(user,evaluationsCoach)=>{if((user===null||user===void 0?void 0:user.role)==='joueur'&&evaluationsCoach.length>0){const evalExistanteIsma=evaluationsCoach.find(e=>e.id_joueur===user.id&&(e.id_coach==='1'||e.id_coach===1));if(evalExistanteIsma){setEvalIsma({entrainements:String(evalExistanteIsma.entrainements||evalExistanteIsma.communication||''),coaching:String(evalExistanteIsma.coaching||evalExistanteIsma.tactique||''),relation:String(evalExistanteIsma.relation||evalExistanteIsma.respect||'')});}const evalExistanteAdam=evaluationsCoach.find(e=>e.id_joueur===user.id&&(e.id_coach==='27'||e.id_coach===27));if(evalExistanteAdam){setEvalAdam({entrainements:String(evalExistanteAdam.entrainements||evalExistanteAdam.communication||''),coaching:String(evalExistanteAdam.coaching||evalExistanteAdam.tactique||''),relation:String(evalExistanteAdam.relation||evalExistanteAdam.respect||'')});}}};const saveEvaluationIsma=(user,evaluationsCoach,setEvaluationsCoach,showNotification)=>{const newEvaluations=evaluationsCoach.filter(e=>!(e.id_joueur===user.id&&(e.id_coach==='1'||e.id_coach===1)));const moyenneCalculee=calculerMoyenne(evalIsma);if(moyenneCalculee){newEvaluations.push({id:Date.now().toString(),id_joueur:user.id,id_coach:1,entrainements:parseFloat(evalIsma.entrainements)||0,coaching:parseFloat(evalIsma.coaching)||0,relation:parseFloat(evalIsma.relation)||0,note_globale:parseFloat(moyenneCalculee),derniere_modification:new Date().toISOString()});setEvaluationsCoach(newEvaluations);showNotification('Évaluation d\\'Isma sauvegardée !','success');}};const saveEvaluationAdam=(user,evaluationsCoach,setEvaluationsCoach,showNotification)=>{const newEvaluations=evaluationsCoach.filter(e=>!(e.id_joueur===user.id&&(e.id_coach==='27'||e.id_coach===27)));const moyenneCalculee=calculerMoyenne(evalAdam);if(moyenneCalculee){newEvaluations.push({id:Date.now().toString(),id_joueur:user.id,id_coach:27,entrainements:parseFloat(evalAdam.entrainements)||0,coaching:parseFloat(evalAdam.coaching)||0,relation:parseFloat(evalAdam.relation)||0,note_globale:parseFloat(moyenneCalculee),derniere_modification:new Date().toISOString()});setEvaluationsCoach(newEvaluations);showNotification('Évaluation d\\'Adam sauvegardée !','success');}};return{evalIsma,setEvalIsma,evalAdam,setEvalAdam,loadEvaluations,saveEvaluationIsma,saveEvaluationAdam};};export default useEvaluations;","map":{"version":3,"names":["useState","useEffect","calculerMoyenne","useEvaluations","evalIsma","setEvalIsma","entrainements","coaching","relation","evalAdam","setEvalAdam","loadEvaluations","user","evaluationsCoach","role","length","evalExistanteIsma","find","e","id_joueur","id","id_coach","String","communication","tactique","respect","evalExistanteAdam","saveEvaluationIsma","setEvaluationsCoach","showNotification","newEvaluations","filter","moyenneCalculee","push","Date","now","toString","parseFloat","note_globale","derniere_modification","toISOString","saveEvaluationAdam"],"sources":["/Users/hichamghazi/Desktop/esc-cappelle/src/hooks/useEvaluations.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { calculerMoyenne } from '../utils/noteCalculator';\n\nconst useEvaluations = () => {\n  const [evalIsma, setEvalIsma] = useState({ entrainements: '', coaching: '', relation: '' });\n  const [evalAdam, setEvalAdam] = useState({ entrainements: '', coaching: '', relation: '' });\n\n  const loadEvaluations = (user, evaluationsCoach) => {\n    if (user?.role === 'joueur' && evaluationsCoach.length > 0) {\n      const evalExistanteIsma = evaluationsCoach.find(\n        e => e.id_joueur === user.id && (e.id_coach === '1' || e.id_coach === 1)\n      );\n\n      if (evalExistanteIsma) {\n        setEvalIsma({\n          entrainements: String(evalExistanteIsma.entrainements || evalExistanteIsma.communication || ''),\n          coaching: String(evalExistanteIsma.coaching || evalExistanteIsma.tactique || ''),\n          relation: String(evalExistanteIsma.relation || evalExistanteIsma.respect || '')\n        });\n      }\n\n      const evalExistanteAdam = evaluationsCoach.find(\n        e => e.id_joueur === user.id && (e.id_coach === '27' || e.id_coach === 27)\n      );\n\n      if (evalExistanteAdam) {\n        setEvalAdam({\n          entrainements: String(evalExistanteAdam.entrainements || evalExistanteAdam.communication || ''),\n          coaching: String(evalExistanteAdam.coaching || evalExistanteAdam.tactique || ''),\n          relation: String(evalExistanteAdam.relation || evalExistanteAdam.respect || '')\n        });\n      }\n    }\n  };\n\n  const saveEvaluationIsma = (user, evaluationsCoach, setEvaluationsCoach, showNotification) => {\n    const newEvaluations = evaluationsCoach.filter(e => !(e.id_joueur === user.id && (e.id_coach === '1' || e.id_coach === 1)));\n    const moyenneCalculee = calculerMoyenne(evalIsma);\n\n    if (moyenneCalculee) {\n      newEvaluations.push({\n        id: Date.now().toString(),\n        id_joueur: user.id,\n        id_coach: 1,\n        entrainements: parseFloat(evalIsma.entrainements) || 0,\n        coaching: parseFloat(evalIsma.coaching) || 0,\n        relation: parseFloat(evalIsma.relation) || 0,\n        note_globale: parseFloat(moyenneCalculee),\n        derniere_modification: new Date().toISOString()\n      });\n\n      setEvaluationsCoach(newEvaluations);\n      showNotification('Évaluation d\\'Isma sauvegardée !', 'success');\n    }\n  };\n\n  const saveEvaluationAdam = (user, evaluationsCoach, setEvaluationsCoach, showNotification) => {\n    const newEvaluations = evaluationsCoach.filter(e => !(e.id_joueur === user.id && (e.id_coach === '27' || e.id_coach === 27)));\n    const moyenneCalculee = calculerMoyenne(evalAdam);\n\n    if (moyenneCalculee) {\n      newEvaluations.push({\n        id: Date.now().toString(),\n        id_joueur: user.id,\n        id_coach: 27,\n        entrainements: parseFloat(evalAdam.entrainements) || 0,\n        coaching: parseFloat(evalAdam.coaching) || 0,\n        relation: parseFloat(evalAdam.relation) || 0,\n        note_globale: parseFloat(moyenneCalculee),\n        derniere_modification: new Date().toISOString()\n      });\n\n      setEvaluationsCoach(newEvaluations);\n      showNotification('Évaluation d\\'Adam sauvegardée !', 'success');\n    }\n  };\n\n  return {\n    evalIsma,\n    setEvalIsma,\n    evalAdam,\n    setEvalAdam,\n    loadEvaluations,\n    saveEvaluationIsma,\n    saveEvaluationAdam\n  };\n};\n\nexport default useEvaluations;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}